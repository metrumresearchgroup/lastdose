<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate last dose amount (LDOS) and time after last dose (TAD) — lastdose • lastdose</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate last dose amount (LDOS) and time after last dose (TAD) — lastdose" />
<meta property="og:description" content="Use lastdose to add (or potentially replace) columns to the input
data frame; lastdose_list and lastdose_df returns calculated information
as either list or data.frame format without modifying the input data." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lastdose</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/metrumresearchgroup/lastdose">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate last dose amount (LDOS) and time after last dose (TAD)</h1>
    <small class="dont-index">Source: <a href='https://github.com/metrumresearchgroup/lastdose/blob/master/R/lastdose.R'><code>R/lastdose.R</code></a></small>
    <div class="hidden name"><code>lastdose.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use lastdose to add (or potentially replace) columns to the input
data frame; lastdose_list and lastdose_df returns calculated information
as either <code>list</code> or <code>data.frame</code> format without modifying the input data.</p>
    </div>

    <pre class="usage"><span class='fu'>lastdose</span>(<span class='no'>data</span>, <span class='no'>...</span>, <span class='kw'>include_ldos</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>lastdose_list</span>(
  <span class='no'>data</span>,
  <span class='kw'>fill</span> <span class='kw'>=</span> -<span class='fl'>99</span>,
  <span class='kw'>back_calc</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>addl_ties</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"obs_first"</span>, <span class='st'>"dose_first"</span>),
  <span class='kw'>comments</span> <span class='kw'>=</span> <span class='fu'><a href='find_comments.html'>find_comments</a></span>(<span class='no'>data</span>)
)

<span class='fu'>lastdose_df</span>(<span class='no'>data</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>data set as data frame; see <code>details</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments passed to lastdose_list</p></td>
    </tr>
    <tr>
      <th>include_ldos</th>
      <td><p><code>logical</code>; if <code>FALSE</code> then the <code>LDOS</code> data is not
appended to the data set.  Only used for the lastdose function.</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>the value for <code>TAD</code> that is used for records when no
doses are found for an individual or when <code>back_calc</code> is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>back_calc</th>
      <td><p>if <code>TRUE</code>, then the time before the first dose
is calculated for records prior to the first dosing record when
at least one dosing record is found in the data set.  Records before
the first dosing record will have negative values.</p></td>
    </tr>
    <tr>
      <th>addl_ties</th>
      <td><p>what to do when doses scheduled through <code>ADDL</code> happen at
the same time as observation records; if <code>obs_first</code> then the observation
is assumed to happen before the dose and the observation is a trough
concentration; if <code>dose_first</code> then the dose is assumed to be administered
and the observation made immediately after (with no advance in time). See
details.</p></td>
    </tr>
    <tr>
      <th>comments</th>
      <td><p>a logcial vector with length equal to the number of rows
in <code>data</code> indicating which records are to be ignored when looking for <code>TAD</code>
and <code>LDOS</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When calling lastdose to modify the data frame, two columns will be
added (by default): <code>TAD</code> indicating the time after the most-recent dose
and <code>LDOS</code> indicating the amount of the most recent dose.  This default
behavior can be modified with the <code>include_ldos</code> argument.</p>
<p>When calling lastdose_list or lastdose_df, the respective items are
accessible with <code>tad</code> and <code>ldos</code> (note the lower case form here to
distinguish from the columns that might be added to the data frame).</p>
<p>Additional notes regarding behavior:</p><ul>
<li><p>All functions require an input data set as a data frame</p></li>
<li><p>The data set should be formatted according to <code>NMTRAN</code> type
conventions</p></li>
<li><p>Required columns</p><ul>
<li><p><code>ID</code> or <code>id</code>: subject identifier</p></li>
<li><p><code>TIME</code> or <code>time</code>: data set time</p></li>
<li><p><code>AMT</code> or <code>amt</code>: dose amount for dosing records</p></li>
<li><p><code>EVID</code> or <code>evid</code>: event ID; records with <code>EVID</code> or 1 or 4
are considered dosing records</p></li>
</ul></li>
<li><p>Optional columns</p><ul>
<li><p><code>ADDL</code> or <code>addl</code>: additional doses to administer</p></li>
<li><p><code>II</code> or <code>ii</code>: dosing interval</p></li>
</ul></li>
<li><p>An error is generated if required columns are not found; no error
or warning if optional columns are not found</p></li>
<li><p>All required and optional columns are required to be numeric</p></li>
<li><p>Missing values are not allowed in: <code>ID</code>,<code>EVID</code>,<code>ADDL</code>,<code>II</code></p></li>
<li><p>When missing values are found in <code>TIME</code>, both <code>TAD</code> and <code>LDOS</code> are set to
missing</p></li>
<li><p>An error is generated for missing <code>AMT</code> in dosing records (evid 1 or 4)</p></li>
<li><p>No error is generated for missing <code>AMT</code> in non-dosing records</p></li>
</ul>

<p>An example illustrating the <code>addl_ties</code> argument: when there is <code>Q24h</code>
dosing and both an an additional dose and an observation happen at 24 hours,
<code>obs_first</code> will set the observation<code>TAD</code> to 24 and <code>dose_first</code> will set
the observation <code>TAD</code> to 0.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>file</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"csv/data1.csv"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"lastdose"</span>)

<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='st'>"Rcpp"</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: Rcpp</span></div><div class='input'>
<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span>(<span class='no'>file</span>)

<span class='no'>a</span> <span class='kw'>&lt;-</span> <span class='fu'>lastdose</span>(<span class='no'>data</span>)

<span class='no'>b</span> <span class='kw'>&lt;-</span> <span class='fu'>lastdose_df</span>(<span class='no'>data</span>)

<span class='no'>c</span> <span class='kw'>&lt;-</span> <span class='fu'>lastdose_list</span>(<span class='no'>data</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


